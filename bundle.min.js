!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).runExclusive=e()}}((function(){return function e(n,t,r){function i(o,l){if(!t[o]){if(!n[o]){var s="function"==typeof require&&require;if(!l&&s)return s(o,!0);if(u)return u(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var a=t[o]={exports:{}};n[o][0].call(a.exports,(function(e){return i(n[o][1][e]||e)}),a,a.exports,e,n,t,r)}return t[o].exports}for(var u="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,n,t){"use strict";var r=this&&this.__spreadArrays||function(){for(var e=0,n=0,t=arguments.length;n<t;n++)e+=arguments[n].length;var r=Array(e),i=0;for(n=0;n<t;n++)for(var u=arguments[n],o=0,l=u.length;o<l;o++,i++)r[i]=u[o];return r};t.__esModule=!0,t.buildMethodCb=t.buildCb=t.getPrComplete=t.isRunning=t.cancelAllQueuedCalls=t.getQueuedCallCount=t.buildMethod=t.build=t.createGroupRef=void 0;var i=e("minimal-polyfills/WeakMap"),u=function(){function e(){this.queuedCalls=[],this.isRunning=!1,this.prComplete=Promise.resolve()}return e.prototype.cancelAllQueuedCalls=function(){var e;return this.queuedCalls.splice(0,e=this.queuedCalls.length),e},e}(),o={},l=new i.Polyfill;function s(e,n){var t=l.get(e);t||(t=new i.Polyfill,l.set(e,t));var r=t.get(n);return r||(r=new u,t.set(n,r)),r}function f(){return new Array(0)}t.createGroupRef=f,t.build=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];switch(e.length){case 1:return h(!0,f(),e[0]);case 2:return h(!0,e[0],e[1])}},t.buildMethod=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];switch(e.length){case 1:return h(!1,f(),e[0]);case 2:return h(!1,e[0],e[1])}},t.getQueuedCallCount=function(e,n){var t=c(e,n);return t?t.queuedCalls.length:0},t.cancelAllQueuedCalls=function(e,n){var t=c(e,n);return t?t.cancelAllQueuedCalls():0},t.isRunning=function(e,n){var t=c(e,n);return!!t&&t.isRunning},t.getPrComplete=function(e,n){var t=c(e,n);return t?t.prComplete:Promise.resolve()};var a=new i.Polyfill;function c(e,n){void 0===n&&(n=o);var t=a.get(e);if(!t)throw Error("Not a run exclusiveFunction");var r=l.get(n);if(r)return r.get(t)}function h(e,n,t){var r,i=function(){for(var i=this,u=[],o=0;o<arguments.length;o++)u[o]=arguments[o];if(!e){if(!(this instanceof Object))throw new Error("Run exclusive, <this> should be an object");r=s(this,n)}return new Promise((function(e,n){var o;r.prComplete=new Promise((function(e){return o=function(){return e()}}));var l=function(t){o(),r.isRunning=!1,r.queuedCalls.length&&r.queuedCalls.shift()(),"data"in t?e(t.data):n(t.reason)};(function e(){for(var n=this,i=[],u=0;u<arguments.length;u++)i[u]=arguments[u];if(r.isRunning)r.queuedCalls.push((function(){return e.apply(n,i)}));else{r.isRunning=!0;try{t.apply(this,i).then((function(e){return l({data:e})})).catch((function(e){return l({reason:e})}))}catch(e){l({reason:e})}}}).apply(i,u)}))};return e&&(r=s(o,n)),a.set(i,n),i}function p(e,n,t){var i,u=function(){for(var u=this,o=[],l=0;l<arguments.length;l++)o[l]=arguments[l];if(!e){if(!(this instanceof Object))throw new Error("Run exclusive, <this> should be an object");i=s(this,n)}var f,a=void 0;o.length&&"function"==typeof o[o.length-1]&&(a=o.pop()),i.prComplete=new Promise((function(e){return f=function(){return e()}}));var c=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];f(),i.isRunning=!1,i.queuedCalls.length&&i.queuedCalls.shift()(),a&&a.apply(u,e)};c.hasCallback=!!a,function e(){for(var n=this,u=[],o=0;o<arguments.length;o++)u[o]=arguments[o];if(i.isRunning)i.queuedCalls.push((function(){return e.apply(n,u)}));else{i.isRunning=!0;try{t.apply(this,r(u,[c]))}catch(e){throw e.message+=" ( This exception should not have been thrown, miss use of run-exclusive buildCb )",e}}}.apply(this,o)};return e&&(i=s(o,n)),a.set(u,n),u}t.buildCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];switch(e.length){case 1:return p(!0,f(),e[0]);case 2:return p(!0,e[0],e[1])}},t.buildMethodCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];switch(e.length){case 1:return p(!1,f(),e[0]);case 2:return p(!1,e[0],e[1])}}},{"minimal-polyfills/WeakMap":3}],2:[function(e,n,t){"use strict";t.__esModule=!0,t.Polyfill=t.LightMapImpl=void 0;var r=function(){function e(){this.record=[]}return e.prototype.has=function(e){return this.record.map((function(e){return e[0]})).indexOf(e)>=0},e.prototype.get=function(e){var n=this.record.filter((function(n){return n[0]===e}))[0];if(void 0!==n)return n[1]},e.prototype.set=function(e,n){var t=this.record.filter((function(n){return n[0]===e}))[0];return void 0===t?this.record.push([e,n]):t[1]=n,this},e.prototype.delete=function(e){var n=this.record.map((function(e){return e[0]})).indexOf(e);return!(n<0)&&(this.record.splice(n,1),!0)},e.prototype.keys=function(){return this.record.map((function(e){return e[0]}))},e}();t.LightMapImpl=r,t.Polyfill="undefined"!=typeof Map?Map:r},{}],3:[function(e,n,t){"use strict";t.__esModule=!0,t.Polyfill=void 0;var r=e("./Map");t.Polyfill="undefined"!=typeof WeakMap?WeakMap:r.Polyfill},{"./Map":2}]},{},[1])(1)}));